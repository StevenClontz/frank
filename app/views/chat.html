<div ng-controller="ChatCtrl">
  <div id="messages" ng-show="messages.length">
    <div class="panel panel-default"
         ng-repeat="message in messages | orderBy:'name'">
      <div class="panel-body">
        <p>
          <strong>
            {{message.name}}
          </strong>
          <span ng-if="message.affiliation">
            &mdash; {{message.affiliation}}
          </span>
          <small ng-if="message.email">
            <a ng-href="mailto:{{message.email}}">
              [email]
            </a>
          </small>
        </p>
        <p ng-if="message.text">
          {{message.text}}
        </p>
      </div>
    </div>
  </div>

  <h2>Light a Candle</h2>

  <form role="form"
        ng-submit="addMessage(newMessage)">
    <div class="form-group">
      <label for="newMessageName">
        Name
      </label>
      <input type="text"
             class="form-control"
             id="newMessageName"
             placeholder="(First and last name)"
             ng-model="newMessage.name">
    </div>
    <div class="form-group">
      <label for="newMessageName">
        Email (optional)
      </label>
      <input type="email"
             class="form-control"
             id="newMessageName"
             placeholder="(email@example.com)"
             ng-model="newMessage.email">
    </div>
    <div class="form-group">
      <label for="newMessageAffiliation">
        University/City (optional)
      </label>
      <input type="text"
             class="form-control"
             id="newMessageAffiliation"
             placeholder="(Auburn University)"
             ng-model="newMessage.affiliation">
    </div>
    <div class="form-group">
      <label for="newMessageText">
        Message (optional)
      </label>
      <textarea class="form-control"
                id="newMessageAffiliation"
                placeholder="(Any words you'd like to leave about Frank.)"
                ng-model="newMessage.text">
      </textarea>
    </div>
    <div class="form-group">
      <button class="btn btn-primary"
              type="submit"
              ng-disabled="!newMessage.name">
        Submit
      </button>
    </div>
  </form>

  <p class="alert alert-warning" ng-show="err">
    There was an error: {{err}}
  </p>
</div>